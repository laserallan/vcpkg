diff --git a/CMakeLists.txt b/CMakeLists.txt
index d3e3365..102cc5b 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -57,9 +57,38 @@ IF (NOT WIN32)
   SET ( PTHREAD_LIB pthread )
 ENDIF()
 
-INCLUDE_DIRECTORIES ( ${ILMBASE_PACKAGE_PREFIX}/include/OpenEXR )
-LINK_DIRECTORIES ( ${ILMBASE_PACKAGE_PREFIX}/lib )
-MESSAGE ( "ILMBASE_PACKAGE_PREFIX = " ${ILMBASE_PACKAGE_PREFIX})
+IF(ILMBASE_PACKAGE_PREFIX)
+	INCLUDE_DIRECTORIES ( ${ILMBASE_PACKAGE_PREFIX}/include/OpenEXR )
+	LINK_DIRECTORIES ( ${ILMBASE_PACKAGE_PREFIX}/lib )
+	MESSAGE (STATUS "ILMBASE_PACKAGE_PREFIX = " ${ILMBASE_PACKAGE_PREFIX})
+ELSE()
+	FIND_PACKAGE(ILMBASE QUIET)
+	IF(ILMBASE_FOUND)
+		INCLUDE_DIRECTORIES ( ${ILMBASE_INCLUDE_DIR} )
+	ELSE()
+
+		SET(PKG_CONFIG_USE_CMAKE_PREFIX_PATH 1)
+		FIND_PACKAGE(PkgConfig)
+		
+		IF(PkgConfig_FOUND)
+			pkg_check_modules(ILMBASE REQUIRED IlmBase)
+			IF(ILMBASE_FOUND)
+				IF(${CMAKE_BUILD_TYPE} STREQUAL "Debug")
+					string(REPLACE "/debug" "" ILMBASE_INCLUDE_DIRS ${ILMBASE_INCLUDE_DIRS})
+				ENDIF()
+				INCLUDE_DIRECTORIES ( ${ILMBASE_INCLUDE_DIRS} )
+				LINK_DIRECTORIES ( ${ILMBASE_LIBRARY_DIRS} )
+				MESSAGE (STATUS "ILMBASE_INCLUDE_DIRS = " ${ILMBASE_INCLUDE_DIRS})
+				MESSAGE (STATUS "ILMBASE_LIBRARY_DIRS = " ${ILMBASE_LIBRARY_DIRS})
+				MESSAGE(STATUS "Found IlmBase: ${ILMBASE_PREFIX} (found version \"${ILMBASE_VERSION}\")")
+			ENDIF()
+		ELSE()
+			MESSAGE(FATAL_ERROR "Unable to find IlmBase library")
+		ENDIF()
+	ENDIF()
+ENDIF()
+
+
 
 SET (LIB_TYPE STATIC)
 IF (BUILD_SHARED_LIBS)
@@ -74,6 +103,8 @@ IF (USE_ZLIB_WINAPI)
   ADD_DEFINITIONS(-DZLIB_WINAPI)
 ENDIF ()
 
+IF (NOT WIN32)
+
 # Test for GCC-style inline asm support with AVX instructions
 INCLUDE (CheckCXXSourceCompiles)
 CHECK_CXX_SOURCE_COMPILES (
@@ -104,6 +135,7 @@ CHECK_CXX_SOURCE_COMPILES (
     }
     " HAVE_SYSCONF_NPROCESSORS_ONLN)
 
+ENDIF()
 
 ##########################
 # OpenEXRConfig.h generation
